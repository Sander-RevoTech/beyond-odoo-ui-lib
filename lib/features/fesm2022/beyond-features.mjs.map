{"version":3,"file":"beyond-features.mjs","sources":["../../../projects/features/src/lib/features/grid/models/types.ts","../../../projects/features/src/lib/features/grid/services/grid-form.services.ts","../../../projects/features/src/lib/features/grid/models/cols/base-col.ts","../../../projects/features/src/lib/features/grid/models/cols/bool-col.ts","../../../projects/features/src/lib/features/grid/models/cols/date-col.ts","../../../projects/features/src/lib/features/grid/models/cols/enum-col.ts","../../../projects/features/src/lib/features/grid/models/cols/number-col.ts","../../../projects/features/src/lib/features/grid/models/cols/relation-col.ts","../../../projects/features/src/lib/features/grid/models/cols/string-col.ts","../../../projects/features/src/lib/features/grid/models/grid-filters.ts","../../../projects/features/src/lib/features/grid/models/grid-data.ts","../../../projects/features/src/lib/features/grid/services/grid-instance.service.ts","../../../projects/features/src/lib/features/grid/components/abstract.component.ts","../../../projects/features/src/lib/features/grid/components/form/form.component.ts","../../../projects/features/src/lib/features/grid/components/form/form.component.html","../../../projects/features/src/lib/features/grid/components/pagination/pagination.component.ts","../../../projects/features/src/lib/features/grid/components/pagination/pagination.component.html","../../../projects/features/src/lib/features/grid/components/grid/grid.component.ts","../../../projects/features/src/lib/features/grid/components/grid/grid.component.html","../../../projects/features/src/lib/features/grid/components/tags/tags.component.ts","../../../projects/features/src/lib/features/grid/components/tags/tags.component.html","../../../projects/features/src/lib/features/grid/components/control/control.component.ts","../../../projects/features/src/lib/features/grid/components/control/control.component.html","../../../projects/features/src/lib/features/grid/services/grid-view.service.ts","../../../projects/features/src/lib/features/grid/components/container/container.component.ts","../../../projects/features/src/lib/features/grid/components/container/container.component.html","../../../projects/features/src/lib/features/grid/public-api.ts","../../../projects/features/src/public-api.ts","../../../projects/features/src/beyond-features.ts"],"sourcesContent":["import { InputChoicesOption } from '@beyond/form-model';\r\nimport { Observable } from 'rxjs';\r\nimport { Filter as TabulatorFilter } from 'tabulator-tables';\r\n\r\ntype KeyValuePair = {\r\n  key: string;\r\n  value: number;\r\n};\r\n\r\nexport enum ParameterType {\r\n  Unknown,\r\n  String,\r\n  Number,\r\n  Boolean,\r\n  DateTime,\r\n  Enum,\r\n  Relation,\r\n}\r\n\r\nexport interface ColMetaData {\r\n  name: string;\r\n  type: ParameterType;\r\n  enumValues?: string[];\r\n  dataSearch$?: (search?: string) => Observable<InputChoicesOption[]>;\r\n}\r\n\r\nexport type ActiveFilter = { key: string; values: Filter[] };\r\nexport type Filter = TabulatorFilter;\r\nexport type Sort = { field: string; dir: 'asc' | 'desc' };\r\n\r\nexport type ajaxResponse<T> = { data: T[]; last_page: number };\r\nexport type ajaxRequestFuncParams = { filter: Filter[]; sort: Sort[]; page: number; size: number };\r\n\r\nexport type ViewType = 'grid' | 'card';\r\n","import { Injectable } from '@angular/core';\r\n\r\nimport { InputBase, InputPanel } from '@beyond/form-model';\r\nimport { isNonNullable } from '@beyond/utils';\r\n\r\nimport { BydGridData } from '../models/grid-data';\r\nimport { Filter } from '../models/types';\r\n\r\n@Injectable({\r\n  providedIn: 'root',\r\n})\r\nexport class BydGridFormService<T> {\r\n  constructor() {}\r\n\r\n  public getFiltersForm(model: BydGridData<T>): InputBase<any>[] {\r\n    const keys = Object.keys(model.cols);\r\n    if (!keys || keys.length === 0) {\r\n      return [];\r\n    }\r\n\r\n    return [\r\n      new InputPanel({\r\n        key: 'main-panel',\r\n        label: `grid.${model.scope}.title`,\r\n        class: 'p-space-sm',\r\n        children: keys.map(key => model.cols[key].getInputForm()).filter(isNonNullable),\r\n      }),\r\n    ];\r\n  }\r\n\r\n  public formatFiltersForm(model: BydGridData<T>, data: any): Filter[] {\r\n    return Object.keys(model.cols).reduce<Filter[]>((acc, key) => {\r\n      const filter = model.cols[key].formatInputForm(data);\r\n\r\n      if (!filter) {\r\n        return acc;\r\n      }\r\n      return [...acc, filter];\r\n    }, []);\r\n  }\r\n}\r\n","import { InputBase } from '@beyond/form-model';\nimport { Observable } from 'rxjs';\nimport { ColumnDefinition } from 'tabulator-tables';\n\nimport { BydGridData } from '../grid-data';\nimport { ColMetaData, Filter } from '../types';\n\nexport const operatorMap: { [key: string]: string } = {\n  contains: '%',\n  greaterThan: '>',\n  lessThan: '<',\n  equals: '=',\n  notEqual: '!=',\n  greaterThanOrEqual: '>=',\n  lessThanOrEqual: '<=',\n};\nexport interface IFilterOptions {\n  allow: boolean;\n}\nexport interface IBaseCol {\n  scope: string;\n  col: ColMetaData;\n}\n\nexport class BaseCol<T> {\n  public data: IBaseCol;\n  public model: BydGridData<any>;\n\n  get key() {\n    return this.data.col.name;\n  }\n\n  get inputLabel() {\n    return `grid.${this.data.scope}.core.${this.data.col.name}`;\n  }\n  constructor(data: IBaseCol, model: BydGridData<any>) {\n    this.data = data;\n    this.model = model;\n  }\n\n  public getColDef(): ColumnDefinition {\n    return {\n      field: this.key,\n      title: this.inputLabel,\n      headerFilter: 'input',\n    };\n  }\n\n  public getInputForm(): InputBase<any> | null {\n    return null;\n  }\n  public formatInputForm(data: any): Filter | null {\n    const value = data[this.key];\n\n    if (!value) {\n      return null;\n    }\n\n    return {\n      field: this.key,\n      type: '=',\n      value: value,\n    };\n  }\n}\n\n// export class BaseFilterComponent<T extends AdvancedFilterModel, U extends BaseCol<T>> implements IFilter {\n//   public input: InputBase<any> | null = null;\n\n//   protected _col: U | null = null;\n//   protected _model: T | null = null;\n//   protected _params: IFilterParams<unknown, GridContext> | null = null;\n\n//   agInit(params: IFilterParams) {\n//     this._params = params;\n//     this._col = params.context.cols[params.column.getColId()] ?? null;\n\n//     this.setInput();\n//   }\n\n//   isFilterActive() {\n//     this.setInput();\n//     return !!this._model;\n//   }\n//   getModel() {\n//     return this._model;\n//   }\n//   setModel(model: any): void | AgPromise<void> {\n//     this._model = model;\n//   }\n//   refresh?(newParams: IFilterParams): boolean {\n//     console.log('Method refresh not implemented.');\n//     return true;\n//   }\n//   doesFilterPass(params: IDoesFilterPassParams): boolean {\n//     if (!this._col?.key) {\n//       return true;\n//     }\n//     const data = params.data[this._col?.key];\n//     if (!data || !this._model) {\n//       return true;\n//     }\n//     return this._validateDataAgainstModel(data, this._model);\n//   }\n\n//   getTags(): ActiveFilterTag[] {\n//     return [];\n//   }\n\n//   getModelAsString(model: ISimpleFilter): string {\n//     return '';\n//   }\n\n//   apply(data: any) {\n//     this.setModel(this._col?.getFiltersModel(data));\n\n//     this._params?.api.onFilterChanged();\n//     this._params?.context.grid.applyFilterModel({}, FilterModelSource.storage);\n//   }\n\n//   setInput() {\n//     if (this.input) {\n//       this.input.destroy();\n//     }\n//     this.input = this._col?.getInputForm(true) ?? null;\n//     this.input?.createFormControl();\n//     this.input?.changeValue$.subscribe({\n//       next: value => {\n//         const data: any = [];\n//         data[this._col?.key ?? ''] = value;\n\n//         this.apply(data);\n//       },\n//     });\n//   }\n\n//   private _validateDataAgainstModel(data: any, model: AdvancedFilterModel): boolean {\n//     if (model.filterType === 'join') {\n//       // Validation for JoinAdvancedFilterModel\n//       if (!Array.isArray(model.conditions)) return false;\n\n//       if (model.type === 'AND') {\n//         return model.conditions.every(condition => this._validateDataAgainstModel(data, condition));\n//       } else if (model.type === 'OR') {\n//         return model.conditions.some(condition => this._validateDataAgainstModel(data, condition));\n//       }\n//     }\n\n//     if (['text', 'number', 'date', 'dateString', 'boolean'].includes(model.filterType)) {\n//       // Validation for ColumnAdvancedFilterModel\n//       switch (model.filterType) {\n//         case 'text':\n//           return this._validateTextCondition(data, model.type, model.filter);\n//         case 'number':\n//           return this._validateScalarCondition(data, model.type, model.filter);\n//         case 'date':\n//         case 'dateString':\n//           return this._validateScalarCondition(\n//             new Date(data).getTime(),\n//             model.type,\n//             model.filter ? new Date(model.filter).getTime() : undefined\n//           );\n//         case 'boolean':\n//           return this._validateBooleanCondition(data, model.type);\n//         default:\n//           return false;\n//       }\n//     }\n\n//     return false;\n//   }\n\n//   private _validateTextCondition(data: string, type: TextAdvancedFilterModelType, filter?: string): boolean {\n//     switch (type) {\n//       case 'equals':\n//         return data === filter;\n//       case 'notEqual':\n//         return data !== filter;\n//       case 'contains':\n//         return filter ? data.includes(filter) : false;\n//       case 'notContains':\n//         return filter ? !data.includes(filter) : true;\n//       case 'startsWith':\n//         return filter ? data.startsWith(filter) : false;\n//       case 'endsWith':\n//         return filter ? data.endsWith(filter) : false;\n//       case 'blank':\n//         return data === '';\n//       case 'notBlank':\n//         return data !== '';\n//       default:\n//         return false;\n//     }\n//   }\n\n//   private _validateScalarCondition(data: number, type: ScalarAdvancedFilterModelType, filter?: number): boolean {\n//     switch (type) {\n//       case 'equals':\n//         return data === filter;\n//       case 'notEqual':\n//         return data !== filter;\n//       case 'lessThan':\n//         return filter !== undefined && data < filter;\n//       case 'lessThanOrEqual':\n//         return filter !== undefined && data <= filter;\n//       case 'greaterThan':\n//         return filter !== undefined && data > filter;\n//       case 'greaterThanOrEqual':\n//         return filter !== undefined && data >= filter;\n//       case 'blank':\n//         return data === null || data === undefined;\n//       case 'notBlank':\n//         return data !== null && data !== undefined;\n//       default:\n//         return false;\n//     }\n//   }\n\n//   private _validateBooleanCondition(data: boolean, type: BooleanAdvancedFilterModelType): boolean {\n//     return (type === 'true' && data === true) || (type === 'false' && data === false);\n//   }\n// }\n","import { BaseCol } from './base-col';\n\nexport class BoolCol extends BaseCol<Boolean> {}\n","import { InputDatePicker } from '@beyond/form-model';\nimport { format } from 'date-fns';\n\nimport { Filter } from '../types';\nimport { BaseCol } from './base-col';\n\nexport class DateCol extends BaseCol<Date> {\n  public override getInputForm() {\n    return new InputDatePicker({\n      key: this.key,\n      label: this.inputLabel,\n      rangeEnabled: true,\n    });\n  }\n\n  public override formatInputForm(data: any): Filter | null {\n    const value = data[this.key];\n\n    if (!value) {\n      return null;\n    }\n\n    return {\n      field: this.key,\n      type: 'like',\n      value: format(value, 'yyyy-MM-dd'),\n    };\n  }\n}\n","import { InputDropdown, InputPanel } from '@beyond/form-model';\nimport { of } from 'rxjs';\n\nimport { BaseCol } from './base-col';\n\nexport class EnumCol extends BaseCol<string> {\n  public override getInputForm() {\n    return new InputPanel({\n      key: 'enum-panel',\n      contentClass: 'row g-0',\n      children: [\n        new InputDropdown({\n          key: this.key,\n          label: this.inputLabel,\n          options: of(\n            this.data.col.enumValues?.map(value => ({\n              id: value,\n              name: value,\n            })) ?? []\n          ),\n        }),\n      ],\n    });\n  }\n}\n","import { InputNumber, InputPanel } from '@beyond/form-model';\n\nimport { Filter } from '../types';\nimport { BaseCol } from './base-col';\n\nexport class NumberCol extends BaseCol<Number> {\n  public override getInputForm() {\n    return new InputPanel({\n      key: 'number-panel',\n      contentClass: 'row g-0',\n      children: [\n        new InputNumber({\n          key: this.key,\n          label: this.inputLabel,\n        }),\n      ],\n    });\n  }\n\n  public override formatInputForm(data: any): Filter | null {\n    const value = data[this.key];\n\n    if (!value) {\n      return null;\n    }\n\n    return {\n      field: this.key,\n      type: '=',\n      value: value,\n    };\n  }\n}\n","import { InputChoices, InputTextBox } from '@beyond/form-model';\n\nimport { Filter } from '../types';\nimport { BaseCol } from './base-col';\n\nexport class RelationCol extends BaseCol<string> {\n  public override getInputForm() {\n    if (this.data.col.dataSearch$) {\n      return new InputChoices({\n        key: this.key,\n        label: this.inputLabel,\n        class: 'pb-2',\n        advancedSearch$: this.data.col.dataSearch$,\n      });\n    }\n\n    return new InputTextBox({\n      key: this.key,\n    });\n  }\n\n  public override formatInputForm(data: any): Filter | null {\n    const value = data[this.key];\n\n    if (!value) {\n      return null;\n    }\n\n    return {\n      field: this.key,\n      type: 'in',\n      value: value,\n    };\n  }\n}\n","import { InputTextBox } from '@beyond/form-model';\n\nimport { Filter } from '../types';\nimport { BaseCol } from './base-col';\n\nexport class StringCol extends BaseCol<string> {\n  public override getInputForm() {\n    // const value = this.values;\n\n    return new InputTextBox({\n      key: this.key,\n      label: this.inputLabel,\n      class: 'pb-2',\n    });\n  }\n\n  public override formatInputForm(data: any): Filter | null {\n    const value = data[this.key];\n\n    if (!value || value === '' || value.length === 0) {\n      return null;\n    }\n\n    return {\n      field: this.key,\n      type: 'like',\n      value: value,\n    };\n  }\n}\n","import { TabulatorFull as Tabulator } from 'tabulator-tables';\r\n\r\nimport { ActiveFilter, Filter } from './types';\r\n\r\nexport class BydGridFilters {\r\n  constructor(\r\n    public readonly scope: string,\r\n    public readonly table: Tabulator\r\n  ) {}\r\n\r\n  public get() {\r\n    return this.table.getFilters(false).reduce<ActiveFilter[]>((acc, filter) => {\r\n      const existing = acc.find(tag => tag.key === filter.field);\r\n      if (existing) {\r\n        existing.values.push(filter);\r\n      } else {\r\n        acc.push({\r\n          key: filter.field,\r\n          values: [filter],\r\n        });\r\n      }\r\n      return acc;\r\n    }, []);\r\n  }\r\n  public apply(filters: Filter[]) {\r\n    this.table?.setFilter(filters);\r\n  }\r\n\r\n  public remove(filter: Filter) {\r\n    this.table.removeFilter(filter.field, filter.type, filter.value);\r\n  }\r\n}\r\n","import { ElementRef, signal } from '@angular/core';\r\n\r\nimport { BehaviorSubject, Observable, firstValueFrom } from 'rxjs';\r\nimport { ColumnDefinition, TabulatorFull as Tabulator } from 'tabulator-tables';\r\n\r\nimport { BaseCol } from './cols/base-col';\r\nimport { BoolCol } from './cols/bool-col';\r\nimport { DateCol } from './cols/date-col';\r\nimport { EnumCol } from './cols/enum-col';\r\nimport { NumberCol } from './cols/number-col';\r\nimport { RelationCol } from './cols/relation-col';\r\nimport { StringCol } from './cols/string-col';\r\nimport { BydGridFilters } from './grid-filters';\r\nimport { ColMetaData, Filter, ParameterType, ViewType, ajaxRequestFuncParams, ajaxResponse } from './types';\r\n\r\nexport interface IDataService<T> {\r\n  getData$: (params: ajaxRequestFuncParams) => Observable<ajaxResponse<T>>;\r\n}\r\n\r\nexport class BydGridData<T> {\r\n  get data(): T[] {\r\n    return this.table?.getData() ?? [];\r\n  }\r\n  public table: Tabulator | null = null;\r\n  public cols: { [index: string]: BaseCol<any> } = {};\r\n  public filters: BydGridFilters | null = null;\r\n\r\n  public readonly isReady$ = new BehaviorSubject(false);\r\n\r\n  public tableHtml: ElementRef | null = null;\r\n  public readonly displayType = signal<ViewType>('card');\r\n\r\n  constructor(public readonly scope: string) {}\r\n\r\n  public init(params: { elementRef: ElementRef; colsMetaData: ColMetaData[]; services: IDataService<T> }) {\r\n    this.table = new Tabulator(params.elementRef.nativeElement, {\r\n      height: '500px',\r\n      layout: 'fitColumns',\r\n      paginationMode: 'remote',\r\n      pagination: true,\r\n      paginationSize: 10,\r\n      paginationInitialPage: 1,\r\n      ajaxFiltering: true,\r\n      filterMode: 'remote',\r\n\r\n      ajaxSorting: true,\r\n      sortMode: 'remote',\r\n\r\n      columns: this._getColumns(params.colsMetaData),\r\n\r\n      ajaxURL: 'dummy',\r\n      ajaxRequestFunc: (url: string, config: any, ajaxParams: ajaxRequestFuncParams): Promise<ajaxResponse<T>> => {\r\n        return firstValueFrom(params.services.getData$(ajaxParams));\r\n      },\r\n      ajaxResponse: function (_: any, __: any, response: ajaxResponse<T>) {\r\n        return response;\r\n      },\r\n    });\r\n\r\n    this.table.on('tableBuilt', () => {\r\n      this.tableHtml = params.elementRef;\r\n      this.filters = new BydGridFilters(this.scope, this.table!);\r\n      this.isReady$.next(true);\r\n    });\r\n  }\r\n\r\n  public switchView(type: ViewType) {\r\n    this.displayType.set(type);\r\n  }\r\n\r\n  private _getColumns(colsMetaData: ColMetaData[]): ColumnDefinition[] {\r\n    this.cols = Object.fromEntries(\r\n      colsMetaData.map(meta => {\r\n        const field = this._factoryCols(meta);\r\n        return [field.key, field];\r\n      })\r\n    );\r\n\r\n    return Object.keys(this.cols)\r\n      .filter(key => !key.startsWith('_'))\r\n      .map(key => ({ ...this.cols[key].getColDef() }));\r\n  }\r\n\r\n  private _factoryCols(col: ColMetaData): BaseCol<any> {\r\n    switch (col.type) {\r\n      case ParameterType.String:\r\n        return new StringCol({ scope: this.scope, col: col }, this);\r\n      case ParameterType.Enum:\r\n        return new EnumCol({ scope: this.scope, col: col }, this);\r\n      case ParameterType.Number:\r\n        return new NumberCol({ scope: this.scope, col: col }, this);\r\n      case ParameterType.DateTime:\r\n        return new DateCol({ scope: this.scope, col: col }, this);\r\n      case ParameterType.Boolean:\r\n        return new BoolCol({ scope: this.scope, col: col }, this);\r\n      case ParameterType.Relation:\r\n        return new RelationCol({ scope: this.scope, col: col }, this);\r\n      default:\r\n        return new BaseCol({ scope: this.scope, col: col }, this);\r\n    }\r\n  }\r\n}\r\n","import { Injectable, inject } from '@angular/core';\r\n\r\nimport { BydGridData } from '../models/grid-data';\r\nimport { BydGridFormService } from './grid-form.services';\r\n\r\n@Injectable({\r\n  providedIn: 'root',\r\n})\r\nexport class BydGridInstanceService<T> {\r\n  public readonly grids: { [index: string]: BydGridData<T> } = {};\r\n\r\n  constructor() {}\r\n\r\n  public create(key: string) {\r\n    if (!this.has(key)) {\r\n      this.grids[key] = new BydGridData<T>(key);\r\n    }\r\n  }\r\n\r\n  public get(key: string, create: boolean = false) {\r\n    if (!this.has(key) && create) {\r\n      this.create(key);\r\n    }\r\n    return this.grids[key];\r\n  }\r\n\r\n  public has(key: string) {\r\n    return !!this.grids[key];\r\n  }\r\n}\r\n","import { Component, Input, OnInit, inject } from '@angular/core';\r\n\r\nimport { BydBaseComponent } from '@beyond/utils';\r\nimport { Observable, filter, tap } from 'rxjs';\r\n\r\nimport { BydGridData } from '../models/grid-data';\r\nimport { BydGridInstanceService } from '../services/grid-instance.service';\r\n\r\n@Component({ template: '' })\r\nexport abstract class BydAbstractGridComponent<T> extends BydBaseComponent implements OnInit {\r\n  @Input()\r\n  gridId!: string;\r\n\r\n  get data() {\r\n    return this._grid.data;\r\n  }\r\n  get displayType() {\r\n    return this._grid.displayType;\r\n  }\r\n  public isReady$!: Observable<boolean>;\r\n\r\n  protected _grid!: BydGridData<T>;\r\n  private _dataService = inject(BydGridInstanceService);\r\n\r\n  constructor() {\r\n    super();\r\n  }\r\n\r\n  ngOnInit() {\r\n    this._grid = this._dataService.get(this.gridId, true);\r\n    this.isReady$ = this._grid.isReady$.pipe(filter(isReady => isReady));\r\n  }\r\n}\r\n","import { Component, EventEmitter, Output, inject, signal } from '@angular/core';\r\n\r\nimport { BydFormComponent } from '@beyond/form-basic';\r\nimport { InputBase } from '@beyond/form-model';\r\n\r\nimport { Filter } from '../../models/types';\r\nimport { BydGridFormService } from '../../services/grid-form.services';\r\nimport { BydAbstractGridComponent } from '../abstract.component';\r\n\r\n@Component({\r\n  selector: 'byd-grid-form',\r\n  imports: [BydFormComponent],\r\n  templateUrl: './form.component.html',\r\n  styleUrl: './form.component.scss',\r\n})\r\nexport class BydGridFormComponent extends BydAbstractGridComponent<unknown> {\r\n  @Output()\r\n  applied = new EventEmitter<Filter[]>();\r\n\r\n  public filtersForm = signal<InputBase<any>[]>([]);\r\n\r\n  private _formService = inject(BydGridFormService<unknown>);\r\n\r\n  public override ngOnInit() {\r\n    super.ngOnInit();\r\n\r\n    this._registerSubscription(\r\n      this.isReady$.subscribe({\r\n        next: () => this.filtersForm.set(this._formService.getFiltersForm(this._grid)),\r\n      })\r\n    );\r\n  }\r\n\r\n  public apply(data: any) {\r\n    const filters = this._formService.formatFiltersForm(this._grid, data);\r\n\r\n    this._grid.filters?.apply(filters);\r\n\r\n    this.applied.emit(filters);\r\n  }\r\n}\r\n","<byd-form [inputs]=\"this.filtersForm()\" (valid)=\"this.apply($event)\"></byd-form>\n","import { NgTemplateOutlet } from '@angular/common';\nimport { Component } from '@angular/core';\nimport { MatIcon } from '@angular/material/icon';\n\nimport { TypedTemplateDirective } from '@beyond/utils';\n\nimport { BydAbstractGridComponent } from '../abstract.component';\n\ntype PageNumber = {\n  number: number;\n  icon?: string;\n};\n@Component({\n  selector: 'byd-grid-pagination',\n  templateUrl: './pagination.component.html',\n  styleUrls: ['./pagination.component.scss'],\n  standalone: true,\n  imports: [MatIcon, NgTemplateOutlet, TypedTemplateDirective],\n})\nexport class PaginationComponent extends BydAbstractGridComponent<any> {\n  readonly PageNumber!: { pagenumber: PageNumber };\n  readonly maxPageNumber = 10;\n  get grid() {\n    return this._grid;\n  }\n  get show() {\n    return this.paginationGetTotalPages > 1;\n  }\n  get paginationGetTotalPages() {\n    return this.grid.table?.getPageMax() || 0;\n  }\n\n  constructor() {\n    super();\n  }\n\n  public getListPage() {\n    if (!this.grid || !this.grid.table) {\n      return [];\n    }\n    const last = this.paginationGetTotalPages;\n\n    if (last < this.maxPageNumber) {\n      return this._computedPageNumbers(2, last);\n    }\n\n    const current = this.grid.table.getPage() || 0;\n    const rangeStart = Math.floor(current / 10) * 10;\n    const rangeEnd = rangeStart + 10;\n\n    return [\n      ...(rangeStart <= 1 ? [] : [{ number: rangeStart - 1, icon: 'more-line' }]),\n      ...this._computedPageNumbers(rangeStart > 1 ? rangeStart : 2, rangeEnd < last ? rangeEnd : last),\n      ...(rangeEnd > last ? [] : [{ number: rangeEnd, icon: 'more-line' }]),\n    ];\n  }\n\n  private _computedPageNumbers(start: number, end: number): PageNumber[] {\n    const pageNumbers = [];\n    for (let i = start; i < end; i++) {\n      pageNumbers.push({ number: i });\n    }\n    return pageNumbers;\n  }\n}\n","@if (this.grid && this.grid.table && this.show) {\n  <div class=\"flex-start g-space-sm align-center\">\n    <mat-icon (click)=\"this.grid.table.previousPage()\"> chevron_left </mat-icon>\n    <ng-template [ngTemplateOutlet]=\"item\" [ngTemplateOutletContext]=\"{ pagenumber: { number: 1 } }\"></ng-template>\n\n    @for (page of this.getListPage(); track page.number) {\n      <ng-template [ngTemplateOutlet]=\"item\" [ngTemplateOutletContext]=\"{ pagenumber: page }\"></ng-template>\n    }\n\n    @if (this.paginationGetTotalPages > 1) {\n      <ng-template\n        [ngTemplateOutlet]=\"item\"\n        [ngTemplateOutletContext]=\"{\n          pagenumber: { number: this.paginationGetTotalPages },\n        }\"\n      ></ng-template>\n    }\n\n    <mat-icon (click)=\"this.grid.table.nextPage()\"> chevron_right </mat-icon>\n  </div>\n}\n\n<ng-template #item let-pagenumber=\"pagenumber\" [typedTemplate]=\"this.PageNumber\">\n  <div\n    class=\"figure c-pointer\"\n    [class.is-active]=\"pagenumber.number === (this.grid.table?.getPage() || 0)\"\n    (click)=\"this.grid.table?.setPage(pagenumber.number)\"\n  >\n    @if (pagenumber.icon) {\n      <mat-icon type=\"sm\">{{ pagenumber.icon }}</mat-icon>\n    } @else {\n      {{ pagenumber.number }}\n    }\n  </div>\n</ng-template>\n","import { AsyncPipe, NgTemplateOutlet } from '@angular/common';\r\nimport { Component, ElementRef, Input, Renderer2, TemplateRef, ViewChild, ViewEncapsulation } from '@angular/core';\r\n\r\nimport { BydAbstractGridComponent } from '../abstract.component';\r\nimport { PaginationComponent } from '../pagination/pagination.component';\r\n\r\n@Component({\r\n  selector: 'byd-grid',\r\n  imports: [PaginationComponent, NgTemplateOutlet, AsyncPipe],\r\n  templateUrl: './grid.component.html',\r\n  styleUrl: './grid.component.scss',\r\n  encapsulation: ViewEncapsulation.None,\r\n})\r\nexport class BydGridComponent<T extends { id: number }> extends BydAbstractGridComponent<T> {\r\n  @Input()\r\n  cardTemplate!: TemplateRef<{ items: T[] }>;\r\n\r\n  @ViewChild('table', { static: true }) tableElement!: ElementRef;\r\n\r\n  constructor(private renderer: Renderer2) {\r\n    super();\r\n  }\r\n\r\n  ngAfterViewInit() {\r\n    this._registerSubscription(\r\n      this.isReady$.subscribe({\r\n        next: () => {\r\n          if (this._grid.tableHtml) {\r\n            this.renderer.appendChild(this.tableElement.nativeElement, this._grid.tableHtml.nativeElement);\r\n          }\r\n        },\r\n      })\r\n    );\r\n  }\r\n}\r\n","<div [style.display]=\"this.displayType() === 'grid' ? 'block' : 'none'\">\r\n  <div #table></div>\r\n</div>\r\n\r\n@if (this.isReady$ | async) {\r\n  @if (this.displayType() === 'card') {\r\n    <ng-template [ngTemplateOutlet]=\"this.cardTemplate\" [ngTemplateOutletContext]=\"{ items: this.data }\"></ng-template>\r\n  }\r\n  <byd-grid-pagination [gridId]=\"this.gridId\"></byd-grid-pagination>\r\n}\r\n","import { Component } from '@angular/core';\n\nimport { TranslatePipe } from '@beyond/translation';\nimport { BydBadgeComponent, BydTextComponent } from '@beyond/ui';\n\nimport { Filter } from '../../models/types';\nimport { BydAbstractGridComponent } from '../abstract.component';\n\n@Component({\n  selector: 'byd-grid-tags',\n  templateUrl: './tags.component.html',\n  styleUrls: ['./tags.component.scss'],\n  standalone: true,\n  imports: [TranslatePipe, BydBadgeComponent, BydTextComponent],\n})\nexport class BydGridTagsComponent extends BydAbstractGridComponent<unknown> {\n  get activeFilters() {\n    return this._grid.filters?.get() ?? [];\n  }\n  override ngOnInit() {\n    super.ngOnInit();\n  }\n\n  public remove(filter: Filter) {\n    this._grid.filters?.remove(filter);\n  }\n}\n","<div class=\"flex-row align-center g-space-sm\">\n  <div class=\"list-tag\">\n    @for (tag of this.activeFilters; track tag.key) {\n      <div class=\"item-tag\">\n        <div class=\"tag-title\">\n          {{ 'grid.' + this.gridId + '.core.' + tag.key | translate }}\n        </div>\n        @for (value of tag.values; track value.field) {\n          <byd-badge\n            [value]=\"value.type + ' ' + value.value\"\n            type=\"primary\"\n            icon=\"close\"\n            (clickAction)=\"this.remove(value)\"\n          ></byd-badge>\n        }\n      </div>\n    }\n  </div>\n\n  <div class=\"reset-n-result flex-start g-space-md\">\n    <!-- <div class=\"rest\" *ngIf=\"this.tagsList.length > 0\">\n      <cam-link (action)=\"this.reset()\" [underline]=\"false\">\n        <div class=\"flex-start g-space-xs align-center\">\n          <cam-font-icon type=\"sm\" name=\"close-tool\"></cam-font-icon>\n          {{ \"grid.tag.delete\" | translate }}\n        </div>\n      </cam-link>\n    </div> -->\n    <div class=\"result\">\n      <byd-text>\n        {{ 'grid.tag.results' | translate: { nb: this.data.length } }}\n      </byd-text>\n    </div>\n  </div>\n</div>\n","import { AsyncPipe } from '@angular/common';\nimport { Component, Input, OnInit } from '@angular/core';\nimport { MatIcon } from '@angular/material/icon';\n\nimport { ViewType } from '../../models/types';\nimport { BydAbstractGridComponent } from '../abstract.component';\n\n@Component({\n  selector: 'byd-grid-control',\n  templateUrl: './control.component.html',\n  styleUrls: ['./control.component.scss'],\n  standalone: true,\n  imports: [MatIcon, AsyncPipe],\n})\nexport class BydGridControlComponent extends BydAbstractGridComponent<any> implements OnInit {\n  @Input()\n  show: { switchView?: boolean } = { switchView: true };\n\n  constructor() {\n    super();\n  }\n\n  public override ngOnInit() {\n    super.ngOnInit();\n    if (this.breakpoints.isMobile && this.show.switchView) {\n      this.switchView('card');\n    }\n  }\n\n  public switchView(type: ViewType) {\n    this._grid.switchView(type);\n  }\n}\n","@if (this.isReady$ | async) {\n  <div class=\"d-flex\">\n    @if (this.show.switchView) {\n      <div class=\"grid-control-container ml-space-xs c-pointer\">\n        <div (click)=\"this.switchView('grid')\" class=\"trigger\" [class.active]=\"this.displayType() === 'grid'\">\n          <mat-icon>list</mat-icon>\n        </div>\n        <div class=\"sep\"></div>\n\n        <div (click)=\"this.switchView('card')\" class=\"trigger\" [class.active]=\"this.displayType() === 'card'\">\n          <mat-icon>grid_view</mat-icon>\n        </div>\n      </div>\n    }\n  </div>\n}\n","import { Injectable } from '@angular/core';\r\n\r\nimport { BydBaseOdooService } from '@beyond/odoo';\r\nimport { isNonNullable } from '@beyond/utils';\r\nimport { Observable, filter, map, mergeMap } from 'rxjs';\r\n\r\nimport { ajaxRequestFuncParams, ajaxResponse } from '../models/types';\r\n\r\n@Injectable({\r\n  providedIn: 'root',\r\n})\r\nexport class BydGridViewService extends BydBaseOdooService {\r\n  constructor() {\r\n    super();\r\n  }\r\n\r\n  public getData$<T>(\r\n    model: string,\r\n    ajaxParam: ajaxRequestFuncParams,\r\n    fields: (keyof T)[]\r\n  ): Observable<ajaxResponse<T>> {\r\n    const filterParams = ajaxParam.filter.map(f => [f.field, f.type, f.value]) ?? [];\r\n    const orderParams = ajaxParam.sort.map(s => `${s.field} ${s.dir}`).join(',') ?? '';\r\n\r\n    return this._odooService.searchCount$(model, filterParams).pipe(\r\n      mergeMap(count =>\r\n        this._odooService\r\n          .searchRead$<T>(model, filterParams, fields, {\r\n            order: orderParams,\r\n            offset: (ajaxParam.page - 1) * ajaxParam.size,\r\n            limit: ajaxParam.size,\r\n          })\r\n          .pipe(\r\n            filter(isNonNullable),\r\n            map(data => ({\r\n              data: data,\r\n              last_page: Math.ceil(count / ajaxParam.size),\r\n            }))\r\n          )\r\n      )\r\n    );\r\n  }\r\n}\r\n","import { Component, ElementRef, Input, ViewChild, inject } from '@angular/core';\r\n\r\nimport { ColMetaData } from '../../models/types';\r\nimport { BydGridViewService } from '../../services/grid-view.service';\r\nimport { BydAbstractGridComponent } from '../abstract.component';\r\n\r\n@Component({\r\n  selector: 'byd-grid-container',\r\n  imports: [],\r\n  templateUrl: './container.component.html',\r\n  styleUrl: './container.component.scss',\r\n})\r\nexport class BydGridContainerComponent extends BydAbstractGridComponent<unknown> {\r\n  @Input()\r\n  model!: string;\r\n\r\n  @Input()\r\n  colsMetaData: ColMetaData[] = [];\r\n\r\n  @ViewChild('table', { static: true }) tableElement!: ElementRef;\r\n\r\n  private _service = inject(BydGridViewService);\r\n\r\n  ngAfterViewInit() {\r\n    this._grid.init({\r\n      elementRef: this.tableElement,\r\n      colsMetaData: this.colsMetaData,\r\n      services: {\r\n        getData$: params =>\r\n          this._service.getData$<any>(\r\n            this.model,\r\n            params,\r\n            this.colsMetaData.map(c => c.name)\r\n          ),\r\n      },\r\n    });\r\n  }\r\n}\r\n","<div style=\"display: none\">\r\n  <div #table></div>\r\n</div>\r\n\r\n<ng-content></ng-content>\r\n","/*\r\n * Public API Surface of features\r\n */\r\n\r\nexport * from './models/types';\r\nexport * from './components/form/form.component';\r\nexport * from './components/grid/grid.component';\r\nexport * from './components/tags/tags.component';\r\nexport * from './components/control/control.component';\r\n\r\nexport * from './components/container/container.component';\r\n","/*\r\n * Public API Surface of features\r\n */\r\n\r\nexport * from './lib/features/grid/public-api';\r\n","/**\n * Generated bundle index. Do not edit.\n */\n\nexport * from './public-api';\n"],"names":["Tabulator"],"mappings":"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YAAY,EAAE,OAAO;SACtB;;IAGI,YAAY,GAAA;AACjB,QAAA,OAAO,IAAI;;AAEN,IAAA,eAAe,CAAC,IAAS,EAAA;QAC9B,MAAM,KAAK,GAAG,IAAI,CAAC,IAAI,CAAC,GAAG,CAAC;QAE5B,IAAI,CAAC,KAAK,EAAE;AACV,YAAA,OAAO,IAAI;;QAGb,OAAO;YACL,KAAK,EAAE,IAAI,CAAC,GAAG;AACf,YAAA,IAAI,EAAE,GAAG;AACT,YAAA,KAAK,EAAE,KAAK;SACb;;AAEJ;AAED;AACA;AAEA;AACA;AACA;AAEA;AACA;AACA;AAEA;AACA;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAEA;AACA;AACA;AAEA;AACA;AACA;AAEA;AACA;AAEA;AACA;AACA;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAEA;AACA;AACA;AACA;AAEA;AACA;AACA;AACA;AAEA;AACA;AACA;AACA;AACA;AACA;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAEA;AACA;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAEA;AACA;AACA;AACA;;AC3NM,MAAO,OAAQ,SAAQ,OAAgB,CAAA;AAAG;;ACI1C,MAAO,OAAQ,SAAQ,OAAa,CAAA;IACxB,YAAY,GAAA;QAC1B,OAAO,IAAI,eAAe,CAAC;YACzB,GAAG,EAAE,IAAI,CAAC,GAAG;YACb,KAAK,EAAE,IAAI,CAAC,UAAU;AACtB,YAAA,YAAY,EAAE,IAAI;AACnB,SAAA,CAAC;;A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"}