{"version":3,"file":"beyond-menu.mjs","sources":["../../../projects/menu/src/lib/models/routes.ts","../../../projects/menu/src/public-api.ts","../../../projects/menu/src/beyond-menu.ts"],"sourcesContent":["import { ActivatedRouteSnapshot } from '@angular/router';\r\n\r\nexport enum BydMainRoute {\r\n  HOME = 'HOME',\r\n  USERLOGIN = 'USERLOGIN',\r\n  USERLOGOUT = 'USERLOGOUT',\r\n}\r\nexport interface IRoute {\r\n  key: string;\r\n  url: string;\r\n  canActivate?: boolean;\r\n  children?: IRoute[];\r\n}\r\n\r\nexport class BydRoutesCore {\r\n  public routes: IRoute[] = [\r\n    {\r\n      key: BydMainRoute.HOME,\r\n      url: '',\r\n    },\r\n    {\r\n      key: BydMainRoute.USERLOGIN,\r\n      url: 'login',\r\n    },\r\n    {\r\n      key: BydMainRoute.USERLOGOUT,\r\n      url: 'logout',\r\n    },\r\n  ];\r\n\r\n  constructor() {}\r\n\r\n  public addRoute(route: IRoute) {\r\n    this.routes.push(route);\r\n  }\r\n  public addRoutes(routes: IRoute[]) {\r\n    routes.forEach(route => this.addRoute(route));\r\n  }\r\n  public getHome() {\r\n    return this.getAbsoluteUrl([BydMainRoute.HOME]);\r\n  }\r\n  public getLogin() {\r\n    return this.getAbsoluteUrl([BydMainRoute.USERLOGIN]);\r\n  }\r\n  public getLogout() {\r\n    return this.getAbsoluteUrl([BydMainRoute.USERLOGOUT]);\r\n  }\r\n  public getUrl(eNums: string[], params: {} = {}, strict = false): string {\r\n    const url = this._replaceParams(this._getUrl(eNums), params);\r\n    return strict ? this._removeParams(url) : url;\r\n  }\r\n  public getAbsoluteUrl<T>(eNums: string[], params: T = {} as T, queryParams: {[index: string]: string} | null = null, strict = false): string {\r\n    const url = this._replaceParams(this._getUrl(eNums, true), params);\r\n    return (strict ? this._removeParams(url) : url) + (queryParams ? this._formatQueryParams(queryParams) : '');\r\n  }\r\n  public addQueryParamsToUrl(route: ActivatedRouteSnapshot, params: { [index: string]: any } = {}): string {\r\n    const keys = Object.keys(params);\r\n\r\n    for (let key of keys) {\r\n      route.params[key] = params[key];\r\n    }\r\n    return route.toString();\r\n  }\r\n  public getPermission(eNums: any[]): boolean {\r\n    const route = this._getRouteByENum(eNums);\r\n    if (route === null) {\r\n      return true;\r\n    } else {\r\n      return route.canActivate === undefined ? true : route.canActivate;\r\n    }\r\n  }\r\n\r\n  private _replaceParams(url: string, params: any): string {\r\n    if (!params || Object.keys(params).length === 0) {\r\n      return url;\r\n    }\r\n    // Create regex using the keys of the replacement object.\r\n    const regex = new RegExp(':(' + Object.keys(params).join('|') + ')', 'g');\r\n    // Replace the string by the value in object\r\n    return url.replace(regex, (m, $1) => params[$1] || m);\r\n  }\r\n  private _removeParams(url: string): string {\r\n    const regex = new RegExp('/:([a-zA-Z0-9_]*)', 'g');\r\n    return url.replace(regex, '');\r\n  }\r\n  private _getRouteByENum(eNums: any[]): IRoute | null {\r\n    let route: IRoute | null = null;\r\n    for (const eNum of eNums) {\r\n      route = this._getByENum(route === null ? this.routes : route.children, eNum);\r\n      if (route === null) {\r\n        return null;\r\n      }\r\n    }\r\n    return route;\r\n  }\r\n\r\n  private _getUrl(eNums: any[], absolute = false): string {\r\n    let route: IRoute | null = null;\r\n    let url = '';\r\n    for (const eNum of eNums) {\r\n      route = this._getByENum(route === null ? this.routes : route.children, eNum);\r\n      if (route === null) {\r\n        break;\r\n      }\r\n      url += (url === '' ? '' : '/') + route.url;\r\n    }\r\n    return route === null ? '' : absolute === false ? route.url : '/' + url;\r\n  }\r\n\r\n  private _getByENum(routes: IRoute[] | null | undefined, eNum: string): IRoute | null {\r\n    if (!routes) {\r\n      return null;\r\n    }\r\n    for (const route of routes) {\r\n      if (route.key === eNum) {\r\n        return route;\r\n      }\r\n    }\r\n    return null;\r\n  }\r\n\r\n  private _formatQueryParams(params: {[index: string]: string}): string {\r\n    const queryString = Object.entries(params)\r\n      .map(([key, value]) => `${encodeURIComponent(key)}=${encodeURIComponent(value)}`)\r\n      .join('&');\r\n    return queryString ? `?${queryString}` : '';\r\n  }\r\n}\r\nexport const BydRoutes = new BydRoutesCore();\r\n","/*\r\n * Public API Surface of menu\r\n */\r\n\r\nexport * from './lib/models/public-api';\r\n","/**\n * Generated bundle index. Do not edit.\n */\n\nexport * from './public-api';\n"],"names":[],"mappings":"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"}