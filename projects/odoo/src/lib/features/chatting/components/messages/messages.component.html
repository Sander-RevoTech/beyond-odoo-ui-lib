<div>
  <byd-loader [isLoading]="this.requestState.isLoading()">
    <byd-error [message]="this.requestState.getErrorMessage()" [code]="this.requestState.getErrorStatus()">
      <div>
        <byd-input-textbox [input]="this.input"></byd-input-textbox>
      </div>

      <div>
        <byd-files-upload
          (filesPicked)="this.images.set($event)"
          [features]="['take-pic', 'upload-pic']"
          [clear$]="this.clearImage$"
        ></byd-files-upload>
      </div>

      <byd-button (action)="this.send()" [state]="this.disable ? 'disabled' : 'classic'">
        <mat-icon>send</mat-icon> Send
      </byd-button>

      <div>
        <div *ngFor="let message of this.data$ | async" class="item-message">
          <div [innerHTML]="message.body"></div>
          <hr *ngIf="(message.body && message.attachment_ids?.length) || 0 > 0" />
          @if (message.attachment_ids?.length || 0 > 0) {
            <div class="attachments">
              <byd-images [ids]="message.attachment_ids ?? []"></byd-images>
            </div>
          }
        </div>
      </div>
    </byd-error>
  </byd-loader>
</div>
