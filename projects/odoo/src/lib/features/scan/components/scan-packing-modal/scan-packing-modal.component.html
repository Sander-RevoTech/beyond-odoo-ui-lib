<div class="p-space-md">
  @if (this.step() === 'scan') {
    <byd-scanning (scanSuccess)="this.scanSuccess($event)" (error)="this.dialogRef.close()"></byd-scanning>
  } @else if (this.step() === 'search') {
    <byd-loader [isLoading]="this.requestState.isLoading()">
      <byd-error [message]="this.requestState.getErrorMessage()" [code]="this.requestState.getErrorStatus()">
        <byd-empty [isEmpty]="this.noData" [isLight]="false">
          <div class="grid">
            @for (scope of this.scopes; track scope) {
              @if (this.getDataByScope(scope).length > 0) {
                <div>
                  <byd-card [highlight]="this.activeScope?.key === scope.key" (click)="this.setScope(scope)">
                    <byd-card-header class="ta-c">
                      <byd-card-title>
                        {{ 'scan.' + scope.key + '.name' | translate }} ({{ this.getDataByScope(scope).length }})
                      </byd-card-title>
                    </byd-card-header>
                  </byd-card>
                </div>
              }
            }
          </div>
          @if (this.activeScope) {
            <div>
              @for (item of this.getDataByScope(this.activeScope); track item) {
                <div class="flex-column justify-content-between m-space-md">
                  <byd-card (click)="this.navigateTo(this.activeScope, item)">
                    <byd-card-header class="ta-c">
                      <byd-card-title>
                        {{ item.name }}
                      </byd-card-title>
                    </byd-card-header>
                    <byd-card-cta>
                      <mat-icon>chevron_right</mat-icon>
                    </byd-card-cta>
                  </byd-card>
                </div>
              }
            </div>
          }
        </byd-empty>
      </byd-error>
    </byd-loader>
  }
</div>
